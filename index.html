<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discipline Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-4xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">ğŸ›¡ï¸ Discipline Tracker</h1>
    <nav class="mb-6 space-x-4">
      <button onclick="showSection('tracker')" class="bg-blue-500 text-white px-4 py-1 rounded">Home</button>
      <button onclick="showSection('report')" class="bg-gray-500 text-white px-4 py-1 rounded">Report</button>
    </nav><!-- Tracker Section -->
<div id="tracker">
  <!-- Daily Check-in -->
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">Today's Check-in</h2>
    <form id="checkin-form" class="space-y-2">
      <div>
        <label class="inline-flex items-center">
          <input type="checkbox" class="form-checkbox" name="porn">
          <span class="ml-2">Stayed away from Porn</span>
        </label>
      </div>
      <div>
        <label class="inline-flex items-center">
          <input type="checkbox" class="form-checkbox" name="masturbation">
          <span class="ml-2">Stayed away from Masturbation</span>
        </label>
      </div>
      <div>
        <label class="inline-flex items-center">
          <input type="checkbox" class="form-checkbox" name="betting">
          <span class="ml-2">Avoided Betting</span>
        </label>
      </div>
      <div>
        <label class="inline-flex items-center">
          <input type="checkbox" class="form-checkbox" name="meaningful">
          <span class="ml-2">Did Something Meaningful</span>
        </label>
      </div>
      <button type="submit" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded">Save Check-in</button>
    </form>
  </div>

  <!-- Temptation Log -->
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">Temptation Log</h2>
    <form id="temptation-form" class="space-y-2">
      <input type="text" id="temptation-trigger" class="w-full p-2 border rounded" placeholder="Trigger (e.g. boredom)">
      <input type="text" id="temptation-action" class="w-full p-2 border rounded" placeholder="What you did to resist or not">
      <select id="temptation-outcome" class="w-full p-2 border rounded">
        <option value="">Select Outcome</option>
        <option value="overcame">âœ… Overcame</option>
        <option value="failed">âŒ Gave In</option>
      </select>
      <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Save Log</button>
    </form>
  </div>

  <!-- Daily Win -->
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">Today's Win</h2>
    <textarea id="daily-win" class="w-full p-2 border rounded" rows="3" placeholder="Something good or meaningful you did today..."></textarea>
    <button id="save-win" class="mt-2 bg-purple-500 text-white px-4 py-2 rounded">Save</button>
  </div>

  <!-- Streak Display -->
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">ğŸ”¥ Streaks</h2>
    <div id="streaks-output" class="text-sm space-y-1"></div>
  </div>

  <div id="output" class="bg-white shadow rounded-lg p-4 mt-6 text-sm"></div>
</div>
    <!-- Progress Chart -->
<div class="bg-white shadow rounded-lg p-4 mb-4">
  <h2 class="text-xl font-semibold mb-2">ğŸ“ˆ Progress Chart (Last 7 Days)</h2>
  <canvas id="progressChart" width="400" height="200"></canvas>
</div>

<!-- Report Section -->
<div id="report" style="display:none;">
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-2xl font-semibold mb-4">ğŸ“Š Weekly Progress</h2>
    <canvas id="progressChart" height="200"></canvas>
  </div>
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">ğŸ“ Temptation Log</h2>
    <div id="logList" class="text-sm space-y-2"></div>
  </div>
  <div class="bg-white shadow rounded-lg p-4 mb-4">
    <h2 class="text-xl font-semibold mb-2">ğŸ† Daily Wins</h2>
    <ul id="winList" class="text-sm space-y-1 list-disc pl-5"></ul>
  </div>
</div>

  </div>  <script>
    const checkinForm = document.getElementById('checkin-form');
    const temptationForm = document.getElementById('temptation-form');
    const output = document.getElementById('output');
    const winButton = document.getElementById('save-win');
    const streaksOutput = document.getElementById('streaks-output');
    const reportCanvas = document.getElementById('progressChart');

    function showSection(sectionId) {
      document.getElementById('tracker').style.display = sectionId === 'tracker' ? 'block' : 'none';
      document.getElementById('report').style.display = sectionId === 'report' ? 'block' : 'none';
      if (sectionId === 'report') loadReport();
    }

    checkinForm.addEventListener('submit', e => {
      e.preventDefault();
      const formData = new FormData(checkinForm);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = true;
      });
      const date = new Date().toISOString().split('T')[0];
      localStorage.setItem(`checkin-${date}`, JSON.stringify(data));
      output.innerText = `âœ… Check-in saved for ${date}`;
      updateStreaks();
    });

    function renderChart() {
  const ctx = document.getElementById('progressChart').getContext('2d');
  const keys = Object.keys(localStorage)
    .filter(k => k.startsWith('checkin-'))
    .sort()
    .slice(-7); // Last 7 days

  const labels = keys.map(k => k.replace('checkin-', ''));
  const categories = ['porn', 'masturbation', 'betting', 'meaningful'];
  const datasets = categories.map(cat => ({
    label: cat,
    data: keys.map(k => {
      const data = JSON.parse(localStorage.getItem(k));
      return data && data[cat] ? 1 : 0;
    }),
    fill: false,
    borderColor: cat === 'porn' ? 'red' :
                 cat === 'masturbation' ? 'blue' :
                 cat === 'betting' ? 'green' : 'purple',
    tension: 0.3
  }));

  new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets
    },
    options: {
      scales: {
        y: { beginAtZero: true, ticks: { stepSize: 1 } }
      }
    }
  });
}

renderChart();

    temptationForm.addEventListener('submit', e => {
      e.preventDefault();
      const trigger = document.getElementById('temptation-trigger').value;
      const action = document.getElementById('temptation-action').value;
      const outcome = document.getElementById('temptation-outcome').value;
      const date = new Date().toISOString();

      const log = { date, trigger, action, outcome };
      const logs = JSON.parse(localStorage.getItem('temptation-logs') || '[]');
      logs.push(log);
      localStorage.setItem('temptation-logs', JSON.stringify(logs));

      output.innerText = `ğŸ“ Temptation log saved.`;
      temptationForm.reset();
    });

    winButton.addEventListener('click', () => {
      const win = document.getElementById('daily-win').value;
      const date = new Date().toISOString().split('T')[0];
      localStorage.setItem(`win-${date}`, win);
      output.innerText = `ğŸ† Daily win saved.`;
    });

    function updateStreaks() {
      const keys = Object.keys(localStorage).filter(k => k.startsWith('checkin-')).sort().reverse();
      const categories = ['porn', 'masturbation', 'betting', 'meaningful'];
      const streaks = {};

      for (let cat of categories) {
        streaks[cat] = 0;
        for (let key of keys) {
          const data = JSON.parse(localStorage.getItem(key));
          if (data && data[cat]) {
            streaks[cat]++;
          } else {
            break;
          }
        }
      }

      let html = '';
      for (let cat of categories) {
        html += `<div><strong>${cat}:</strong> ğŸ”¥ ${streaks[cat]} days</div>`;
      }
      streaksOutput.innerHTML = html;
    }

    function loadReport() {
      const logList = document.getElementById('logList');
      const winList = document.getElementById('winList');

      // Temptation Logs
      const logs = JSON.parse(localStorage.getItem('temptation-logs') || '[]');
      logList.innerHTML = logs.map(log => `
        <div><strong>${log.date.split('T')[0]}</strong>: ${log.trigger} â†’ ${log.outcome}, action: ${log.action}</div>
      `).join('');

      // Daily Wins
      const winKeys = Object.keys(localStorage).filter(k => k.startsWith('win-')).sort().reverse();
      winList.innerHTML = winKeys.map(k => `<li><strong>${k.replace('win-', '')}:</strong> ${localStorage.getItem(k)}</li>`).join('');

      // Weekly Chart (last 7 days)
      const dates = Array.from({length: 7}).map((_, i) => {
        const d = new Date();
        d.setDate(d.getDate() - i);
        return d.toISOString().split('T')[0];
      }).reverse();

      const data = dates.map(date => {
        const entry = JSON.parse(localStorage.getItem(`checkin-${date}`) || '{}');
        return Object.values(entry).filter(v => v).length;
      });

      new Chart(reportCanvas, {
        type: 'bar',
        data: {
          labels: dates,
          datasets: [{
            label: 'Habits Completed per Day',
            data: data,
            backgroundColor: '#3B82F6'
          }]
        }
      });
    }

    updateStreaks();
  </script></body>
      </html>
